# Memouri (2023. 11. ~ 2023. 12.)

최종 편집 일시: 2024년 5월 28일 오후 5:25
태그: Express, FFMPEG, Javascript, MongoDB, Mongoose, Node.JS
관련 링크: https://github.com/Yush1nk1m/Memouri/tree/main/backend

![Untitled](Memouri%20(2023%2011%20~%202023%2012%20)%20e81321af45754516bacb9c8811344dcb/6e07d2f2-4a92-431f-8bc8-3986ca0b15d2.png)

# 1. 프로젝트 소개

 Memouri는 Memory(기억) + 우리(our)의 합성어로, 사용자의 경험을 그룹과 공유할 수 있는 영상 기반의 소셜 미디어 플랫폼입니다. Memouri에서 사용자는 ‘그룹’이라는 단위로 활동하며, 각 그룹에 관련된 동영상들을 게시하고 그룹 내의 다른 사용자들과 상호작용할 수 있습니다.

 본 프로젝트는 2023년 2학기 LG전자와 서강대학교가 산학협력하여 개설된 **커넥티드플랫폼이론과실제** 캡스톤디자인 교과에서 진행된 프로젝트입니다.

 **프로젝트 공통 과제**: LG Smart TV에서 구동되는 Media Streaming Web App 제작

 **백엔드 개발 목표**: Adaptive Streaming을 제공할 수 있는 백엔드 API 서버 개발

 **프로젝트 규모**: 구현 코드 약 4,000 라인, 총 322회 커밋

 **아키텍처:**

![Untitled](Memouri%20(2023%2011%20~%202023%2012%20)%20e81321af45754516bacb9c8811344dcb/Untitled.png)

# 2. 프로젝트 핵심 기술 및 기여 내용

 

## 2-1. 프로젝트 핵심 기술 사용 목적 및 근거

- **Node.js + Express**
    - **사용 목적**: 백엔드 API 서버 구현
    - **사용 근거**
        - 프론트엔드 개발자와 같은 프로그래밍 언어로 개발할 수 있어 상호 간 코드를 이해하기 쉽다.
        - 짧은 기간 내에 프로토타입을 개발할 수 있다.
- **MongoDB + Mongoose**
    - **사용 목적**: 데이터베이스 조작
    - **사용 근거**
        - 개발 프로젝트가 처음이고 프로젝트 전체에 주어진 시간이 많지 않아 RDBMS에 비해 설계가 간단하고 구조 변경에 유연한 데이터베이스가 필요하였다. MongoDB는 이러한 필요를 충족시켜주는 NoSQL 데이터베이스이다.
- **FFMPEG**
    - **사용 목적**
        - 저장한 동영상의 썸네일 추출
        - 저장한 동영상을 해상도별로 분리
        - HLS Adaptive Streaming을 위한 Segmentation
    - **사용 근거**
        - 경쟁 소프트웨어들에 비해 성능이 좋다.
        - 오랜 기간 개발된 오픈소스 소프트웨어이기 때문에 문서화가 잘 되어 있다.
        - fluent-ffmpeg과 같이 소프트웨어의 편리한 조작이 가능케 해주는 라이브러리가 잘 발달되어 있다.

## 2-2. 프로젝트 기여 내용

 본 프로젝트에서 저는 백엔드 리포지토리의 총 322회에 이르는 커밋 중 약 300회 정도의 커밋을 기록하였습니다.

 제가 수행한 주요한 작업은 다음과 같습니다.

1. **데이터베이스 설계 및 구현**
2. **RESTful API 설계 및 구현**
3. **전체적인 서버 로직 구현**
4. **설계한 내용에 대한 개발 문서화**

# 3. 배운 점 및 아쉬웠던 점

## 3-1. 프로젝트를 통해 배운 점

1. **협업 툴로서의 git 사용법**
 한 리포지토리에서 두 명 이상의 개발자가 작업하기 위해 branch를 분리하고, 작업 목표를 달성한 후 이를 main branch에 merge하는 작업 흐름을 익혔습니다.
2. **백엔드 개발자와 프론트엔드 개발자 간의 소통 방법**
 저는 프론트엔드 개발자가 상대적으로 사용자의 경험을 중시하고, 백엔드 개발자가 상대적으로 개발자의 경험을 중시한다고 생각합니다. 그러나 서비스의 궁극적인 목적은 사용자의 경험이기 때문에 백엔드 개발자도 사용자의 경험을 충분히 고려할 수 있어야 합니다. 
 제가 이것을 크게 느낀 것은 API를 설계할 때였습니다. API의 요청 형식과 응답 형식을 정하는 문제는 미래의 사용자와 프론트엔드 개발자가 어떤 정보를 제공할 수 있을지, 백엔드 개발자가 그들에게 어떤 서비스를 제공할 수 있을지에 관한 문제입니다.
 이러한 관점에서 프론트엔드 개발자가 백엔드 서버를 black box로 간주하더라도 이를 잘 활용할 수 있게끔 수시로 API를 notion에 문서화하고 피드백을 받아 빠르게 업데이트하였습니다.
3. **프로젝트 문서화의 중요성**
 개발을 하면서 fluent-ffmpeg과 같이 잘 만들어지고 문서화도 잘 되어 있는 프로젝트가 있는가하면, LG전자에서 개발하고 있는 webOS의 luna service api와 같이 호환이 잘 안 되고 문서화도 잘 안 되어 있는 프로젝트도 맞닥뜨렸습니다.
 이를 보며 개발자의 가장 큰 책임은 잘 작동되는 프로그램을 작성하는 것보다도 잘 이해할 수 있는 프로그램 및 그와 관련된 문서들을 작성하는 것이라는 생각이 들었습니다. 프로그램이 잘 작동하지 않더라도 다른 사람이 이해하게끔 작성하면 다같이 이를 디버깅할 수 있기 때문입니다.
4. **Main OS의 전환 — Linux OS로의 이동**
 본 프로젝트를 진행하며 저는 Windows OS 위에 가상 환경인 WSL(Windows Subsystem for Linux)을 설치하여 개발하면 **/proc/stat**과 같은 시스템 정보를 정확히 읽을 수 없음을 알게 되었습니다. 따라서 프로젝트 기간 중 작업용 노트북에 SSD를 추가하였고, 해당 SSD에 Ubuntu 22.04 OS를 설치하여 현재까지도 프로젝트를 진행하거나 프로그래밍 공부를 할 때 멀티 부팅으로 사용하고 있습니다.

## 3-2. 프로젝트에서 아쉬웠던 점

1. **자동 테스트 부재**
 Node.js + Express 환경에서는 Jest 같은 프레임워크를 사용해 자동 테스트를 수행할 수 있다는 사실을 모르고 있었습니다. 따라서 개발한 API마다 기능 테스트 웹 페이지를 작성해 실제로 회원 가입을 하고, 로그인을 하고, 특정 요청을 보내는 동작을 수행하면서 테스트를 진행하였습니다. 그런데 이는 빠른 개발을 불가능하게 하고 완벽한 기능 검증에 대한 신뢰도를 떨어뜨렸습니다.
2. **빈약한 설계 및 그에 따른 백엔드 개발자 간 협업 부족**
 같이 백엔드 개발을 맡은 팀원분께서 다른 과목에서 진행하는 어려운 과제가 있어 이를 끝낼 때까지 저 혼자 개발을 진행했습니다. 이 기간 동안 저는 사전에 필요한 기능에 대한 정의를 하지 않았고, 어디까지 개발할지에 대한 한계를 규정하지 않은 채로 구현의 재미에만 맛들려 막무가내로 개발을 진행했습니다.
 개발 속도도 매우 빨랐기에 뒤늦게 돌아온 팀원은 제 작업 흐름에 편승할 수 없었고, 일부 문서만을 작성하는 데 그쳤습니다. 이후 개발할 때는 조금 더 설계에 신경을 쓰고 사전에 필요한 기능을 정의해둔 채로 프로젝트에 착수해야겠다고 생각했습니다.
3. **Transaction 미사용**
 하나의 함수에서 여러 가지 Create, Update, Delete 작업이 의존적으로 수행된다면 이 연산들을 어떻게 안전하게 수행할 수 있을까요? 바로 Transaction의 사용입니다. 이를 현재는 알고 있지만 본 프로젝트를 진행할 당시에는 알지 못했습니다. 따라서 서버가 자체적인 에러에 매우 취약하게 설계되었습니다.
 이 프로젝트를 다시 진행할 수 있다면 저는 먼저 의존적인 데이터베이스 작업들에 대해 Transaction 로직부터 추가할 것입니다.
4. **실제 서비스 배포까지 이르지 못함**
 서비스를 배포하는 경험까지 쌓고 싶었으나 프로젝트 후반부에 프론트엔드 영역의 디버깅과 테스팅에 집중하게 되면서 백엔드 서버를 배포할 여유가 없었습니다. 따라서 프로젝트 시연 때도 프론트엔드 서버와 백엔드 서버가 같은 LAN에 연결해 registered port를 통해 통신하게 함으로써 인터넷상에 배포하지 않고도 서비스 시나리오를 시연할 수 있었습니다.
